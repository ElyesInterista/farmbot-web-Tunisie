webpackJsonp([0],{519:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},o=r(3),s=r(674),l=r(350),c=r(369),p=r(679),u=r(17),m=r(675),h=r(520),d=r(38),E=r(77),f=r(684),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.primary=function(){return this.props.bot.axisBuffer[this.props.axis]||""},t.prototype.secondary=function(){var e={x:0,y:1,z:2},t=e[this.props.axis],r=this.props.bot.hardware.location[t];return d.isNumber(r)?String(r):r},t.prototype.style=function(){return{border:this.primary()?"1px solid red":""}},t.prototype.change=function(e,t){return function(r){var n=Number(r.currentTarget.value);t(l.changeAxisBuffer(e,n))}},t.prototype.render=function(){return o.createElement("div",{className:"col-xs-3"},o.createElement("label",null,this.props.label),o.createElement("input",{className:"move-input",type:"text",style:this.style(),onChange:this.change(this.props.axis,this.props.dispatch),value:this.primary()||this.secondary()||"---"}))},t}(o.Component);t.AxisInputBox=v;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.cssForIndex=function(e){var t=this.props.choices,r="move-amount no-radius ";return e===d.first(t)&&(r+="leftmost "),e===d.last(t)&&(r+="rightmost "),e===this.props.selected&&(r+="move-amount-selected "),r},t.prototype.render=function(){var e=this;return o.createElement("div",{className:"move-amount-wrapper"},this.props.choices.map(function(t,r){return o.createElement("button",{className:e.cssForIndex(t),onClick:function(){return e.props.selector(t)},key:r},t)}))},t}(o.Component);t.StepSizeSelector=b;var g=function(e,t){return t?o.createElement("p",null,"Press save to view."):e.indexOf("/webcam_url_not_set.jpeg")!==-1?o.createElement("div",{className:"webcam-stream-unavailable"},o.createElement("img",{src:e}),o.createElement("text",null,"Camera stream not available.",o.createElement("br",null),"Press ",o.createElement("b",null,"EDIT")," to add a stream.")):o.createElement("img",{className:"webcam-stream",src:e})},y=function(e){return function(t){e({type:"CHANGE_WEBCAM_URL",payload:t.currentTarget.value})}},w=function(e){function t(){var t=e.call(this)||this;return t.state={isEditingCameraURL:!1},t}return n(t,e),t.prototype.toggleCameraURLEdit=function(){this.setState({isEditingCameraURL:!this.state.isEditingCameraURL})},t.prototype.clearURL=function(){this.props.dispatch({type:"CHANGE_WEBCAM_URL",payload:"http://"});var e=document.querySelector(".webcam-url-input");e.focus()},t.prototype.render=function(){var e=this,t="/webcam_url_not_set.jpeg",r=this.props.bot.account&&this.props.bot.account.webcam_url,n=r||t||"",i=!!this.props.bot.account.dirty,c=this.state.isEditingCameraURL;return o.createElement("div",{className:"all-content-wrapper"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12\n                                col-md-offset-1"},o.createElement("div",null,o.createElement("div",{className:"widget-wrapper"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(h.EStopButton,a({},this.props)),o.createElement("div",{className:"widget-header"},o.createElement("h5",null,"Move"),o.createElement("i",{className:"fa\n                                                        fa-question-circle\n                                                        widget-help-icon"},o.createElement("div",{className:"widget-help-text"},u.t("Use these manual\n                              control buttons to move FarmBot in realtime. Press\n                              the arrows for relative movements or type in new\n                              coordinates and press GO for an\n                              absolute movement. Tip: Press the Home button when\n                              you are done so FarmBot is ready to get back to\n                              work."))))),o.createElement("div",{className:"col-sm-12"},o.createElement("div",{className:"widget-content"},o.createElement("label",{className:"text-center"},u.t("MOVE AMOUNT (mm)")),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement(b,{choices:[1,10,100,1e3,1e4],selector:function(t){return e.props.dispatch(l.changeStepSize(t))},selected:this.props.bot.stepSize}))),o.createElement("div",{className:"row"},o.createElement("table",{className:"jog-table",style:{border:0}},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",null),o.createElement("td",null),o.createElement("td",null),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"y",direction:"up",steps:this.props.bot.stepSize||1e3},this.props))),o.createElement("td",null),o.createElement("td",null),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"z",direction:"up",steps:this.props.bot.stepSize||1e3},this.props)))),o.createElement("tr",null,o.createElement("td",null,o.createElement("button",{className:"button-like i fa fa-home arrow-button",onClick:function(){return l.homeAll(100)}})),o.createElement("td",null),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"x",direction:"left",steps:this.props.bot.stepSize||1e3},this.props))),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"y",direction:"down",steps:this.props.bot.stepSize||1e3},this.props))),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"x",direction:"right",steps:this.props.bot.stepSize||1e3},this.props))),o.createElement("td",null),o.createElement("td",null,o.createElement(s.DirectionButton,a({axis:"z",direction:"down",steps:this.props.bot.stepSize||1e3},this.props)))),o.createElement("tr",null,o.createElement("td",null))))),o.createElement("div",{className:"row"},o.createElement(v,a({axis:"x",label:"X AXIS"},this.props)),o.createElement(v,a({axis:"y",label:"Y AXIS"},this.props)),o.createElement(v,a({axis:"z",label:"Z AXIS"},this.props)),o.createElement("div",{className:"col-xs-3"},o.createElement("button",{className:"full-width green button-like go",onClick:function(){return e.props.dispatch(l.commitAxisChanges())}},"GO")))))))),o.createElement("div",null,o.createElement("div",{className:"widget-wrapper peripherals-widget"},o.createElement("div",{className:"row"},o.createElement(m.Peripherals,a({},this.props)))))),o.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},o.createElement("div",null,o.createElement("div",{className:"widget-wrapper webcam-widget"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},c?o.createElement(p.WebcamSaveBtn,{dispatch:this.props.dispatch,webcamUrl:n,apiUrl:E.API.current.baseUrl,updateState:this.toggleCameraURLEdit.bind(this)}):o.createElement("button",{className:"button-like widget-control gray",onClick:this.toggleCameraURLEdit.bind(this)},u.t("Edit")),o.createElement("div",{className:"widget-header"},o.createElement("h5",null,u.t("Camera")),o.createElement("i",{className:"fa fa-question-circle widget-help-icon"},o.createElement("div",{className:"widget-help-text"},u.t("Press the edit button to update\n                                                                and save your webcam URL.")))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-12"},o.createElement("div",null,c&&o.createElement("div",null,o.createElement("label",null,u.t("Set Webcam URL:")),o.createElement("button",{className:"clear-webcam-url-btn",onClick:this.clearURL.bind(this)},o.createElement("i",{className:"fa fa-times"})),o.createElement("input",{type:"text",onChange:y(this.props.dispatch),value:n,className:"webcam-url-input"}))),g(n,i))),o.createElement(f.TemporaryImageList,{images:this.props.sync.images})))))))},t}(o.Component);w=i([c.connect(function(e){return e})],w),t.Controls=w},664:function(e,t,r){"use strict";function n(){return{type:"EDIT_PERIPHERALS_START",payload:{}}}function a(){return{type:"CONTROL_PERIPHERALS_START",payload:{}}}function i(e){var t=e.index,r=e.peripheral;return{type:"UPDATE_PERIPHERAL",payload:{index:t,peripheral:r}}}function o(e){return function(t,r){function n(){t({type:"REMOVE_PERIPHERAL",payload:e})}var a=(r(),e.peripheral.id);a?p.delete(E.API.current.peripheralsPath+a).then(n).catch(l("Peripheral deletion failed.")):n()}}function s(){return function(e,t){var r=t();p.post(E.API.current.peripheralsPath,{peripherals:r.peripherals.all}).then(function(t){h.devices.current.sync(),e({type:"REPLACE_PERIPHERALS",payload:t.data})}).catch(l("There was a problem saving peripherals"))}}function l(e){return function(t){var r=d.get(t,"response.data.error",m.t(e));u.error(r)}}function c(e){return{type:"PUSH_PERIPHERAL",payload:e}}var p=r(18),u=r(37),m=r(17),h=r(518),d=r(38),E=r(77);t.startEditing=n,t.startControlling=a,t.updatePeripheral=i,t.destroyPeripheral=o,t.saveAll=s,t.pushPeripheral=c},665:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(3),i=r(17),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.caption=function(){var e={0:i.t("no"),false:i.t("no"),off:i.t("no"),1:i.t("yes"),true:i.t("yes"),on:i.t("yes"),undefined:"---","-1":"---"},t=String(this.props.toggleval);return e[t]||"---"},t.prototype.css=function(){var e="button-like toggle-button red",t="button-like toggle-button green",r="button-like toggle-button yellow",n={0:e,false:e,off:e,1:t,true:t,on:t,undefined:r};return n[String(this.props.toggleval)]||r},t.prototype.render=function(){return a.createElement("button",{className:this.css(),onClick:this.props.toggleAction}," ",this.caption())},t}(a.Component);t.ToggleButton=o},674:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(3),i=r(350),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.sendCommand=function(){var e="up"===this.props.direction||"right"===this.props.direction,t=e?-1:1,r=(this.props.steps||250)*t,n={speed:100,x:0,y:0,z:0};n[this.props.axis]=r,i.moveRelative(n)},t.prototype.render=function(){var e="button-like fa fa-2x arrow-button radius \n    fa-arrow-"+this.props.direction;return a.createElement("button",{onClick:this.sendCommand.bind(this),className:e})},t}(a.Component);t.DirectionButton=o},675:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},i=r(3),o=r(678),s=r(677),l=r(676),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getPin=function(e,t){var r=t[e.pin];return r?r:{mode:0,value:-1}},t.prototype.peripherals=function(){var e=this,t=this.props.peripherals,r=this.props.bot.hardware.pins,n=this.props.peripherals.all;return n.length||"controlling"!==t.editorMode?n.map(function(t,n){return i.createElement(s.PeripheralItem,{key:n,dispatch:e.props.dispatch,index:n,pin:e.getPin(t,r),peripheral:t,editorMode:e.props.peripherals.editorMode})}):[i.createElement("p",{key:"foo"},'Click "Edit" to add new peripherals.')]},t.prototype.render=function(){return i.createElement("div",null,i.createElement(o.TitleBar,a({},this.props.peripherals,{dispatch:this.props.dispatch})),i.createElement("div",{className:"col-sm-12"},i.createElement("div",{className:"widget-content"},this.peripherals.call(this),i.createElement(l.PeripheralForm,{dispatch:this.props.dispatch,editorMode:this.props.peripherals.editorMode}))))},t}(i.Component);t.Peripherals=c},676:function(e,t,r){"use strict";function n(e){var t;return t="editing"===e.editorMode?o.createElement(u,i({},e)):o.createElement("div",null)}var a=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o=r(3),s=r(664),l=r(37),c=r(17),p=r(38);t.PeripheralForm=n;var u=function(e){function t(){var t=e.call(this)||this;return t.state={label:""},t}return a(t,e),t.prototype.resetState=function(){this.setState({label:"",pin:void 0})},t.prototype.commitLabel=function(e){this.setState({label:e.currentTarget.value})},t.prototype.commitPin=function(e){this.setState({pin:parseInt(e.currentTarget.value,10)})},t.prototype.submit=function(){var e=this.state,t=e.pin,r=e.label;r&&p.isNumber(t)&&t&&t>0?(this.props.dispatch(s.pushPeripheral({label:r,pin:t})),this.resetState()):l.error(c.t("Please enter a valid label and pin number."))},t.prototype.render=function(){return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-sm-4"},o.createElement("input",{type:"text",placeholder:"Label",onChange:this.commitLabel.bind(this),value:this.state.label})),o.createElement("div",{className:"col-sm-4"},o.createElement("input",{type:"number",value:(this.state.pin||"").toString(),placeholder:"Pin #",onChange:this.commitPin.bind(this)})),o.createElement("div",{className:"col-sm-4"},o.createElement("button",{className:"button-like green",onClick:this.submit.bind(this)},"+")))},t}(o.Component)},677:function(e,t,r){"use strict";function n(e){return"editing"===e.editorMode?s.createElement(h,o({},e)):s.createElement(a,o({},e))}function a(e){var t=e.peripheral,r=e.pin;return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-4"},s.createElement("label",null," ",t.label," ")),s.createElement("div",{className:"col-sm-4"},s.createElement("p",null,c.t("Pin {{num}}",{num:t.pin}))),s.createElement("div",{className:"col-sm-4"},s.createElement(p.ToggleButton,{toggleval:r.value,toggleAction:function(){return u.pinToggle(t.pin)}})))}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},s=r(3),l=r(664),c=r(17),p=r(665),u=r(350),m=r(37);t.PeripheralItem=n;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.commitLabel=function(e){var t=e.currentTarget.value;this.props.dispatch(l.updatePeripheral({index:this.props.index,peripheral:{label:t}}))},t.prototype.commitPin=function(e){var t=parseInt(e.currentTarget.value,10);this.props.dispatch(l.updatePeripheral({index:this.props.index,peripheral:{pin:t}}))},t.prototype.render=function(){var e=this.props,t=e.peripheral,r=e.index,n=e.dispatch;return s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-4"},s.createElement(m.BlurableInput,{value:t.label,onCommit:this.commitLabel.bind(this)})),s.createElement("div",{className:"col-sm-4"},s.createElement(m.BlurableInput,{type:"number",value:t.pin.toString(),onCommit:this.commitPin.bind(this)})),s.createElement("div",{className:"col-sm-4"},s.createElement("button",{className:"button-like red",onClick:function(){return n(l.destroyPeripheral({index:r,peripheral:t}))}},"X")))},t}(s.Component)},678:function(e,t,r){"use strict";function n(e){return"editing"===e.editorMode?s.createElement(a,o({},e)):s.createElement(i,o({},e))}function a(e){var t=p.where(e.all,{dirty:!0}).length;return s.createElement("div",{className:"col-sm-12"},s.createElement("button",{className:"gray button-like widget-control",type:"button",onClick:function(){return e.dispatch(l.startControlling())}},c.t("BACK")),s.createElement("button",{hidden:!t,className:"green button-like widget-control",type:"button",onClick:function(){return e.dispatch(l.saveAll())}},c.t("SAVE*")),s.createElement("div",{className:"widget-header"},s.createElement("h5",null,"Peripherals"),s.createElement("i",{className:"fa fa-question-circle widget-help-icon"},s.createElement("div",{className:"widget-help-text"},c.t("Use these toggle\n                        switches to control FarmBot's peripherals\n                        in realtime. To edit and create new peripherals, press\n                        the EDIT button. Make sure to turn\n                        things off when you're done!")))))}function i(e){return s.createElement("div",{className:"col-sm-12"},s.createElement("button",{className:"gray button-like widget-control",type:"button",onClick:function(){return e.dispatch(l.startEditing())}},c.t("EDIT")),s.createElement("div",{className:"widget-header"},s.createElement("h5",null,"Peripherals"),s.createElement("i",{className:"fa fa-question-circle widget-help-icon"},s.createElement("div",{className:"widget-help-text"},c.t("Use these toggle\n                        switches to control FarmBot's peripherals\n                        in realtime. To edit and create new peripherals, press\n                        the EDIT button. Make sure to turn\n                        things off when you're done!")))))}var o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},s=r(3),l=r(664),c=r(17),p=r(38);t.TitleBar=n},679:function(e,t,r){"use strict";function n(e){var t=e.dispatch,r=e.webcamUrl,n=e.apiUrl,i=e.updateState;return a.createElement("button",{type:"button",className:"green button-like widget-control",onClick:s({dispatch:t,apiUrl:n,webcam_url:r,updateState:i})},o.t("SAVE"))}var a=r(3),i=r(350),o=r(17),s=function(e){var t=e.dispatch,r=e.apiUrl,n=e.webcam_url,a=e.updateState;return function(){return a(),t(function(){return i.updateDevice(r,{webcam_url:n},t)})}};t.WebcamSaveBtn=n},684:function(e,t,r){"use strict";function n(e){var t=e.images;return a.createElement("div",null,t.map(function(e,t){return a.createElement("div",{className:"row",key:t},a.createElement("div",{className:"col-sm-12"},e.attachment_processed_at?a.createElement("img",{src:e.attachment_url}):a.createElement("p",null," Image ",e.id," is still processing. ")))}))}var a=r(3);t.TemporaryImageList=n}});
//# sourceMappingURL=0.56be3f8aa4486751e081.js.map